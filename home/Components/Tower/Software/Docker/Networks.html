<!--
title: Networks
description: 
published: true
date: 2025-09-24T18:27:19.586Z
tags: 
editor: code
dateCreated: 2025-09-24T18:22:42.282Z
-->

```plantuml
@startuml
!theme spacelab

' Define actors and boundaries
actor "User / Internet" as User
cloud "LAN (192.168.10.0/24)" as LAN

boundary "Docker Host" {

    ' --- HOST NETWORK ---
    ' Containers with direct access to the host's network interface
    package "Host Network" <<Node>> #LightSeaGreen {
        rectangle "adguardhome" as adguard
        rectangle "plex"
        rectangle "glances"
    }

    ' --- FRONTEND NETWORK (DMZ) ---
    ' This is the primary entry point, managed by the reverse proxy
    package "frontend_net (DMZ)" <<Network>> #Orange {
        rectangle "npm" as npm <<gateway>>
        note right of npm: Main entry point for all web traffic (Ports 80, 443)

        ' User-facing applications
        rectangle "organizr_new"
        rectangle "overseerr"
        rectangle "immich-server"
        rectangle "paperless_new"
        rectangle "mealie_new"
        rectangle "wikijs"
        rectangle "ollama"
        rectangle "filebrowser_new"
        rectangle "code_server_new"
        rectangle "firefox_new"
        rectangle "authentik-server"
        rectangle "whatsupdocker"
        rectangle "portnote"
        rectangle "audiobookshelf"
        rectangle "calibre"
        ' ... and many others
        rectangle "Misc Web Apps" as misc_frontend
    }

    ' --- BACKEND NETWORK (Application Logic) ---
    ' Internal services that should not be directly exposed
    package "backend_net (Application)" <<Network>> #DodgerBlue {
        rectangle "sabnzbd"
        rectangle "radarr_hd / radarr_4k" as radarr
        rectangle "sonarr_hd / sonarr_4k" as sonarr
        rectangle "prowlarr"
        rectangle "bazarr"
        rectangle "immich_machine_learning"
        rectangle "authentik-worker"
        rectangle "readarr-audio"
        rectangle "readarr-ebook"
        rectangle "Misc Backend Services" as misc_backend
    }

    ' --- DATABASE NETWORK (Data Layer) ---
    ' The most protected network, containing databases
    package "db_net (Data)" <<Network>> #Tomato {
        rectangle "Postgres" as postgres <<database>>
        rectangle "Redis" as redis <<database>>
        rectangle "MariaDB" as mariadb <<database>>
        rectangle "immich_postgres" as immich_pg <<database>>
        rectangle "immich_redis" as immich_redis <<database>>
    }

    ' --- MONITORING NETWORK ---
    ' Services dedicated to monitoring the health of the stack
    package "monitoring_net (Monitoring)" <<Network>> #Grey {
        rectangle "grafana_port"
        rectangle "loki_port"
        rectangle "alloy"
        rectangle "telegraf"
        rectangle "influxdb_port"
        rectangle "uptime-kuma_port"
        rectangle "tautulli_port"
        rectangle "scrutiny"
        rectangle "netdata_port"
    }
}

' Define Relationships and Data Flow

' External Access
User --> npm : "HTTPS/80, 443"
LAN --> adguard : "DNS/53"
LAN --> plex : "32400"
LAN --> glances
LAN ..> npm : (Local DNS)

' Reverse Proxy Flow (Primary Path)
npm ..> organizr_new : "proxies to"
npm ..> paperless_new
npm ..> mealie_new
npm ..> authentik-server
npm ..> misc_frontend

' Frontend to Backend Communication
immich-server --> backend_net
authentik-server --> backend_net
sabnzbd -[hidden]- radarr ' Layout helper
prowlarr -[hidden]- sonarr ' Layout helper

' Backend to Database Communication
backend_net <--> db_net : "App<->DB Traffic"
paperless_new --> db_net
mealie_new --> db_net
wikijs --> db_net
authentik-server --> db_net
authentik-worker --> db_net
portnote --> db_net
booklore --> mariadb
romm --> mariadb

' Immich's self-contained backend
immich-server --> immich_pg
immich-server --> immich_redis

' Monitoring Connections (High Level)
monitoring_net ..> frontend_net : "Scrapes Metrics"
monitoring_net ..> backend_net : "Scrapes Metrics"
monitoring_net ..> db_net : "Scrapes Metrics"
monitoring_net ..> Host : "Monitors Host"
tautulli_port ..> plex : "Monitors Plex"

@enduml
```